<!doctype html>
<head><meta charset='utf-8'/>
<title>Snake Slog</title>
<link rel=stylesheet href="node_modules/xp.css/dist/XP.css">
<link rel=stylesheet href="ide.css">
<style>
</style>
<script src="snake.js"></script>
<script src="vm.js"></script>
<script src="ide.js"></script>
<script src="compiler.js"></script>
</head>
<body>

<div class=window id=game-window>
	<div class="title-bar">
		<div class="title-bar-text">Snake</div>
		<div class="title-bar-controls">
			<button aria-label="Close" class=close></button>
		</div>
	</div>
	<div class="window-body">
		<canvas width=400 height=400></canvas>
		<div>Score: <span id=score>0</span></div>
		<div id=gameover></div>
	</div>
</div>

<div class=icon data-for=game-window>
	<img src=game.png>
	<div>Game</div>
</div>


<script>

let Game = Snake;




window.addEventListener("DOMContentLoaded", _ => {
	prepIDE();

/*
	const xhr = new XMLHttpRequest();
	xhr.open('GET', 'steve.bin');
	xhr.responseType = 'arraybuffer';
	xhr.onreadystatechange = e => {
		if (xhr.readyState === 4) {
			let buffer = xhr.response;
			program = new Int16Array(buffer, 0, Math.floor(buffer.byteLength / 2));
			go(program);
		}
	}
	xhr.send();
	*/
});

//let vm;

function go(program) {
	vm = new VirtualMachine(program, Snake);
	vm.debugLimit = 1000*1000*1000;
	bigstep();
}


</script>